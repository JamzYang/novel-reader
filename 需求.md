
开发一个 Java 程序，利用 Gemini LLM 阅读并分析一个百万字级别的长篇小说。 程序具体流程如下：

1.  **章节识别与校验：**
    *   使用正则表达式 `第\d+章` 识别章节标题。
    *   校验章节顺序递增，检查重复/缺失章节。
    *   发现重复/缺失章节，打印日志并立即中断程序。

2.  **小说分割：**
    *   按章节分割小说。
    *   每 10 章合并为一个 TXT 文件，文件名格式为 "001第1-10章.txt", "002第11-20章.txt" 等。

3.  **Gemini API 调用与分析：**
    *   对每个分割文件调用 Gemini API，使用你提供的固定 Prompt。
    *   10 线程并发调用 API，每分钟限流 15 次。
    *   **Gemini API 预计返回 Markdown 格式的分析结果，而不是结构化 JSON。**

4.  **结果校验与重试：**
    *   **校验方法： 解析 Gemini 返回的 Markdown 结果，统计其中包含的章节数量 (例如，通过查找 Markdown 章节标题 `## 第X章`)，并与切片文件中的章节数量进行比较。**
    *   章节数量不一致时，重试最多 3 次。
    *   超过重试次数仍不一致，记录错误日志，继续处理下一个文件。

5.  **结果保存：**
    *   将每次 API 调用的 **Markdown 结果**  先保存为 JSON 文件，文件名格式为 "001第1-10章_分析.json"。
    *   **最终合并所有分割文件的分析结果到一个 JSON 文件中，文件内容采用 `analysis_results` 结构 (你提供的 JSON 示例格式)。**  这个合并过程需要在程序中完成，将解析 Markdown 后的章节分析结果，按照章节顺序组装成 `analysis_results` JSON 结构。


prompt:
```
请你阅读并逐步分析《牧神记》的每一章节。在分析中，请重点关注以下几个方面，并尽可能提供详细的描写和具体的情节：

男主角的经历：

男主角在本章节中的冒险旅程、日常生活，以及遇到的具体事件。

描述男主角在这些章节中的成长，体现在性格、技能、心境等方面的变化。

男主角在这些章节中是否有重要的转折点或关键事件？如果有，请详细描述事件的内容和影响。

世界观与设定：

在本章节中，小说世界观有什么体现？

详细解释本章节涉及的地理环境、设定、特殊规则和力量原理

人物关系：

列出并详细描述与男主角相关的关键人物在本章节中的表现，他们之间的互动、对话，以及对主角的影响。
他们的背景、性格，以及与主角的关系。

虚构历史：

如果本章节提到重要的历史事件、传说、神话，请详细说明。
这些历史事件和传说对当前世界和男主角产生了什么影响？
其他重要细节：

除了上述四点，请关注章节中任何重要的细节，包括伏笔、线索、暗示等。

总结每章的关键内容，并分析章节之间的关联性。

请注意：

避免过于简略，重点突出情节的细节，尽可能用具体的例子和描述来支撑你的分析。

对于战斗场景，可以简要概括，但重点要放在战斗的结果、对剧情的影响，以及战斗中体现的人物关系和设定。

对伏笔、线索等进行提示，并分析其可能的影响。
```